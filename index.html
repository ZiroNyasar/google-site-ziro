<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rahasia</title>
  <style>
    html, body {
      margin:0;
      padding:0;
      height:100%;
      background:#000;
      overflow:hidden;
    }
    video {
      position:fixed;
      top:0;
      left:0;
      width:100vw;
      height:100vh;
      object-fit:fill; /* stretch sesuai permintaan */
      pointer-events:none;
      background:black;
    }
    .overlay {
      position:fixed;
      top:0;
      left:0;
      width:100vw;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:2;
      cursor:pointer;
      background:rgba(0,0,0,0.35);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
  </style>
</head>
<body>
  <video id="badapple" playsinline loop preload="auto" crossorigin="anonymous">
    <source src="badapple.mp4" type="video/mp4">
  </video>

  <div class="overlay" id="overlay"></div>

  <script>
    const video = document.getElementById("badapple");
    const overlay = document.getElementById("overlay");

    let ready = false;
    let fallback = false;

    video.addEventListener("loadedmetadata", () => {
      console.log("Metadata dimuat.");
    });

    video.addEventListener("canplaythrough", () => {
      ready = true;
      console.log("Video siap diputar.");
    });

    video.addEventListener("error", () => {
      fallback = true;
      console.log("Gagal memuat video. Menggunakan mode fallback.");
    });

    overlay.addEventListener("click", async (e) => {
      e.preventDefault();
      e.stopPropagation();

      if (fallback) {
        console.log("Fallback aktif. Mengunduh video.");
        window.location.href = "badapple.mp4";
        return;
      }

      if (!ready) {
        console.log("Video belum sepenuhnya siap. Mencoba memutar...");
      }

      try {
        video.muted = false;     // paksa suara aktif
        video.volume = 1.0;
        await video.play();
        console.log("Video diputar dengan suara.");
        overlay.style.display = "none";
      } catch (err) {
        console.log("Pemutaran dengan suara gagal. Coba mute dulu.");
        try {
          video.muted = true;
          await video.play();
          console.log("Video diputar tetapi tanpa suara. Browser memblokir audio.");
        } catch (err2) {
          console.log("Pemutaran gagal total. Mengunduh video.");
          window.location.href = "badapple.mp4";
        }
      }
    });

    // akses keyboard
    overlay.tabIndex = 0;
    overlay.addEventListener("keydown", (ev) => {
      if (ev.key === "Enter" || ev.key === " ") {
        ev.preventDefault();
        overlay.click();
      }
    });

    // fallback timeout
    setTimeout(() => {
      if (!ready && !fallback) {
        console.log("Memuat terlalu lama. Mengaktifkan fallback.");
        fallback = true;
      }
    }, 12000);
  </script>
</body>
</html>
